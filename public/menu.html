<!--special offers-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu & Offers</title>
    <link rel="stylesheet" href="/styles.css">
    <!-- FONT IMPORT -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libre+Caslon+Text:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- ICONS IMPORT -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <header>
        <img src='/images/logo.png' alt="logo">
        <div>
            <h2>Dubai Pizzeria</h2>
        </div>
        
        <nav>
            <ul>
                <li><a href="/"><b>Home</b></a></li>
                <li><a href="/about"><b>About</b></a></li>
                <li><a href="/menu"><b>Menu & Orders</b></a></li>
                <li><a href="/contact"><b>Contact Us</b></a></li>
            </ul>
        </nav>
        
    </header>

    <main id="menu">
        <h1>Explore our Menu</h1>
        <div class="deals-box">
            <h2>Limited Deals</h2>
            <p>Don't miss out on our best deals! 40% off on all pizzas below!!! Order now!</p>
            <p style="font-size: 12px;">Note: This exclusive deal is available for members only. Orders must be placed via phone.</p>
            <!--Display the different pizzas with picture, and deals and stuff-->
            <!--AND-->

            <!--Give an order option with selecting dropdowns-->
            <!--OR-->
            <!--Next to the display pic, keep selectable radio buttons-->
            <!--Next to the radio, we have dropdown for pizza sizes etc-->

            <!--AND-->
            <!--Then give add-ons (Maybe like a checkerbox?)-->
            <!--The page shd automatically calculate total cost-->
            <!--Display total cost + Shipping (constant)-->
            <!--Payment details (COD) and delivery location-->

            <!-- <div class="pizza-pics"> 
                <img src='/images/pizza1.jpg' alt="pizza1" style="width: 240px; height: 160px;">
                <img src='/images/pizza2.jpg' alt="pizza2" style="width: 240px; height: 160px;">
                <img src='/images/pizza3.jpg' alt="pizza3" style="width: 240px; height: 160px;">
                <img src='/images/pizza4.jpg' alt="pizza4" style="width: 240px; height: 160px;">
                <img src='/images/pizza5.jpg' alt="pizza5" style="width: 240px; height: 160px;">
                <img src='/images/pizza6.jpg' alt="pizza6" style="width: 240px; height: 160px;">
            </div> -->

            <!--make flipcard for each img with description for special offer 'on call only' -->
            <!--40% off on all these pizzas - for members only - on call only-->

            <div class="pizza-pics">

                <!-- Pepperoni -->
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="/images/pizza1.jpg" alt="Pepperoni" style="width: 240px; height:160px;">
                        </div>
                        <div class="flip-card-back">
                            <h4>Pepperoni</h4>
                            <p>Loaded with spicy pepperoni.</p>
                            <p>$7.99</p>
                        </div>
                    </div>
                </div>

                <!-- Chicken Fajita -->
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="/images/pizza2.jpg" alt="Chicken Fajita" style="width:240px; height:160px;">
                        </div>
                        <div class="flip-card-back">
                            <h4>Chicken Fajita</h4>
                            <p>Grilled chicken with fajita spices.</p>
                            <p>$8.99</p>
                        </div>
                    </div>
                </div>

                <!-- BBQ Chicken -->
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="/images/pizza3.jpg" alt="BBQ Chicken" style="width:240px; height:160px;">
                        </div>
                        <div class="flip-card-back">
                            <h4>BBQ Chicken</h4>
                            <p>Sweet and tangy BBQ sauce with chicken.</p>
                            <p>$8.99</p>
                        </div>
                    </div>
                </div>

                <!-- Veggie Delight -->
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="/images/pizza4.jpg" alt="Veggie Delight" style="width:240px; height:160px;">
                        </div>
                        <div class="flip-card-back">
                            <h4>Veggie Delight</h4>
                            <p>Fresh veggies on a crispy crust.</p>
                            <p>$7.99</p>
                        </div>
                    </div>
                </div>

                <!-- Mushroom pizza -->
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="/images/pizza6.jpg" alt="Mushroom" style="width:240px; height:160px;">
                        </div>
                        <div class="flip-card-back">
                            <h4>Mushroom</h4>
                            <p>Pan crust pizza topped with juicy mushrooms.</p>
                            <p>$6.99</p>
                        </div>
                    </div>
                </div>
            
            
                <!-- 3 Pizza Deal -->
                <div class="flip-card">
                    <div class="flip-card-inner">
                        <div class="flip-card-front">
                            <img src="/images/pizza5.jpg" alt="3PizzaDeal" style="width:240px; height:160px;">
                        </div>
                        <div class="flip-card-back">
                            <h4>3 Pizzas Deal</h4>
                            <p>Order any 3 pizzas and get 50% off!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        
        <div class="order-online">
            <h2>Online Order</h2>
            <p>Click on your favorite pizza, select preferred add-ons, and checkout! - Voila!</p>
            <p>Your pizza will be delivered within 1 hour of placing your order!</p>
        
            <!-- Dropdown for pizzas -->
            <label for="pizza">Choose a Pizza:</label>
            <select id="pizza" name="pizza">
                <!-- Pizza options will be loaded dynamically -->
            </select>
        
            <br><br>
        
            <!-- Add-ons (checkboxes) -->
            <label><input type="checkbox" id="cheese" name="add-ons" value="extra_cheese"> Extra Cheese ($2.00)</label><br>
            <label><input type="checkbox" id="garlic" name="add-ons" value="garlic_bread"> Garlic Bread ($1.50)</label><br>
            <label><input type="checkbox" id="pepper" name="add-ons" value="extra_pepper"> Extra Pepper ($1.00)</label><br>
            <label><input type="checkbox" id="olives" name="add-ons" value="olives"> Olives ($1.50)</label><br>
        
            <br><br>
        
            <!-- Delivery info -->
            <h3>Delivery Information</h3>


            <form id="order-form">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" placeholder="Enter your name"><br>

                <label for="contact">Contact:</label>
                <input type="number" id="contact" name="contact" placeholder="Enter your contact number"><br>

                <label for="address">Delivery Address:</label>
                <input type="text" id="address" name="address" placeholder="Enter your delivery address"><br>

        
                <br><br>
        
                <!-- Total and checkout -->
                <div id="total-box">
                    <p>Shipping Fee: $5.00</p>
                    <p>Total: $<span id="total-price">0.00</span></p>
                    <p><strong>We accept Cash on Delivery only</strong></p>
                    <button type="submit" id="place-order">Place Order</button>
                </div>
            </form>
            
        </div>
    

        <script>
            let pizzaPrice = 0;
            
            // Fetch pizzas from pizzas.json and populate the dropdown
            fetch('/pizzas.json')
                .then(response => response.json())
                .then(data => {
                    const pizzaSelect = document.querySelector('#pizza');
                    
                    // Map through the data and create option elements
                    const options = data.map(pizza => {
                        return `<option value="${pizza.value}" data-price="${pizza.price}">${pizza.label} - $${pizza.price.toFixed(2)}</option>`;
                    }).join('');
                    
                    // Insert options into the select element
                    pizzaSelect.innerHTML = options;
        
                    // Set initial pizza price to the price of the first pizza in the list
                    pizzaPrice = parseFloat(pizzaSelect.options[0].getAttribute('data-price'));
        
                    // Update the total cost on page load
                    updateTotal();
                })
                .catch(error => console.error('Error fetching pizzas.json:', error));
        
            // Function to update the total cost
            function updateTotal() {
                const shippingFee = 5.00;
                let addOnsCost = 0;
        
                // Get the selected pizza price
                const selectedPizza = document.querySelector('#pizza');
                pizzaPrice = parseFloat(selectedPizza.options[selectedPizza.selectedIndex].getAttribute('data-price'));
        
                // Add cost for selected add-ons
                if (document.querySelector('#cheese').checked) addOnsCost += 2.00;
                if (document.querySelector('#garlic').checked) addOnsCost += 1.50;
                if (document.querySelector('#pepper').checked) addOnsCost += 1.00;
                if (document.querySelector('#olives').checked) addOnsCost += 1.50;
        
                // Calculate the total price
                const totalPrice = pizzaPrice + addOnsCost + shippingFee;
        
                // Update the total price displayed on the page
                document.querySelector('#total-price').textContent = totalPrice.toFixed(2);
            }
        
            // Event listeners to update the total when the pizza or add-ons change
            document.querySelector('#pizza').addEventListener('change', updateTotal);
            document.querySelectorAll('input[name="add-ons"]').forEach(addon => {
                addon.addEventListener('change', updateTotal);
            });
        
            // Order form submission functionality
            const orderForm = document.getElementById('order-form'); // Target the order form
            orderForm.addEventListener('submit', async (e) => {
                e.preventDefault(); // Prevent the default form submission

                // Get form data
                const formData = {
                    name: document.getElementById('name').value, // Name input
                    contact: document.getElementById('contact').value, // Contact number input
                    address: document.getElementById('address').value, // Delivery address input
                    totalPrice: document.getElementById('total-price').innerText, // Total price (calculated dynamically)
                    date: new Date().toISOString() // Current date and time for the order
                };

                try {
                    // Send the data as a POST request to the server
                    const response = await fetch('/save-order', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData), // Send the form data as JSON
                    });

                    if (response.ok) {
                        const result = await response.json();
                        alert(result.message); // Show a success message
                        e.target.reset(); // Reset the form after successful submission
                    } else {
                        alert('Failed to save order. Please try again.'); // Error message
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('An error occurred while saving your order.');
                }
            });
       </script>

        

    </main>
    <footer>
        <div class="footer-section">
            <h4>Links</h4>
            <ul class="footer-links">
                <li><a href="/">Home</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/menu">Menu & Orders</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </div>
        
        <div class="footer-section">
            <h4>Contact</h4>
            <p>Al Barsha, Dubai, UAE</p>
            <p>+971 4 XXX XXXX</p>
        </div>
        
        <div class="footer-section">
            <h4>Follow Us</h4>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
        </div>
        <p>&copy; 2024 Dubai Pizzeria</p>
    </footer>

</body>
</html>


<!--
drop down of all listed pizzas from the json file, (dynamic retrieval)
then there should be a checkbox for add ons (like I mentioned the cost of everything should be dynamically calculated)
then there should be information input form form placing the order, including delivery address
there is a fixed shipping cost, which should be added to the total, and the total should be printed down
then there should be a line thta says we only do cash on delivery
-->